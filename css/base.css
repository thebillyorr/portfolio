:root {
  --bg: #f5f9fd;
  --fg: #1B1B1B;

  /* Grid tuning (kept here so variables are available globally) */
  --grid-size: 40px;
  --grid-dot-size: 3px;
  --grid-dot: rgba(0,0,0,0.10);
  --grid-phase-x: 0px;
  --grid-phase-y: 0px;
  --grid-offset-x: 0px;
  --grid-offset-y: 0px;

  --border: rgba(0,0,0,0.08);
  --card-bg: rgba(255,255,255,0.9);

  --accent-sage:    #97B1A6;
  --accent-blue:    #9CB7D6;
  --accent-apricot: #F2C6A0;
  --accent-mauve:   #C6A7C7;
  --accent-mist:    #C9CEC4;
}

:root[data-theme="dark"] {
  --bg: #222526;
  --fg: #EDEDED;
  --grid-dot: rgba(255,255,255,0.12);
  --border: rgba(255,255,255,0.12);
  --card-bg: rgba(0,0,0,0.9);
}

/* Hero gradient vars (move here so one gradient can span the whole page) */
:root {
  --hero-maxw: 1120px;
  --hero-pad: clamp(24px, 5vw, 64px);
  --hero-radius: 22px;
  --hero-grad-1: #f7fbff;
  --hero-grad-2: #e9f0ff;
  --hero-grad-3: #eef3ff;
  --hero-key-face: rgba(255,255,255,0.65);
  --hero-key-stroke: rgba(0,0,0,0.06);
  --hero-key-glow: 140, 180, 255;
}

:root[data-theme="dark"] {
  --hero-grad-1: #17181b;
  --hero-grad-2: #1b1e23;
  --hero-grad-3: #171b21;
  --hero-key-face: rgba(0,0,0,0.5);
  --hero-key-stroke: rgba(255,255,255,0.08);
  --hero-key-glow: 120, 170, 255;
}

/* Apply a single large gradient to the document body so the hero and playground
   share the exact same background. The dot-grid will be rendered on top by
   #playground as a separate layer. */
body {
  /* Global hero gradient + subtle noise overlay (single source of truth).
     Noise is provided as a small repeating SVG tile blended with the gradients. */
  background-color: var(--bg);
  background-image:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='.2'/></svg>"),
    radial-gradient(1200px 600px at 50% 10%, var(--hero-grad-1), transparent 60%),
    radial-gradient(900px 600px at 80% 60%, var(--hero-grad-2), transparent 70%),
    linear-gradient(180deg, var(--hero-grad-3), transparent 60%);
  background-repeat: repeat, no-repeat, no-repeat, no-repeat;
  background-size: 140px 140px, auto, auto, cover;
  background-position: 0 0, 50% 10%, 80% 60%, 0 0;
  background-blend-mode: soft-light, normal, normal, normal;
  overflow-x: hidden;
  transition: background-color 0.3s ease;
}

/* Base Reset */
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
  font-family: -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  background: var(--bg);
  color: var(--fg);
}

/* When a module window (modal) is open */
body.modal-open {
  overflow: hidden;        /* Stop background scroll */
}

/* Reduced Motion: global preference handling */
@media (prefers-reduced-motion: reduce) {
    .module-card,
    .dialog-content,
    .theme-toggle,
    #hero {
        transition: none;
    }
    
    .module-card:hover {
        transform: none;
    }
}
